<app-nav-bar-pedido></app-nav-bar-pedido>
<div class="container mt-2 fade-in">
    <h3>Creemos Un Pedido</h3>
    <div class="row mt-1">
        <div class="col">
            <label>Ingrese el rut del usuario</label>
            <input class="form-control" type="text" #rut placeholder="Ingrese el rut con gui贸n del usuario">
        </div>
        <div class="col">
            <label><br></label><br>
            <button (click)="buscar(rut.value)" type="button" class="btn btn-primary"><i class="fa fa-search" aria-hidden="true"></i></button>
        </div>
    </div>
    <div class="fade-in" *ngIf="clienteEncontrado">
        <div class="row mt-3">
            <div class="col">
                <label>Nombre</label>
                <input class="form-control" disabled value="{{ cliente.nombre }}" type="text" placeholder="Ingrese el rut con gui贸n del usuario">
            </div>
            <div class="col">
                <label>Apellido</label>
                <input class="form-control" disabled type="text" value="{{ cliente.apellido }}" placeholder="Ingrese el rut con gui贸n del usuario">
            </div>
            <div class="col">
                <label>Rut</label>
                <input class="form-control" disabled type="text" value="{{ cliente.rut }}" placeholder="Ingrese el rut con gui贸n del usuario">
            </div>
        </div>
        <div class="row mt-3">
            <div class="col">
                <label>Seleccione El Producto</label>
                <select class=" form-control" name="seleccionProducto" [(ngModel)]="productoSeleccionado.idProducto">
                  <option *ngFor="let producto of productos" [value]="producto.idProducto" >{{producto.nombreP}} </option>
                </select>
            </div>
            <div class="col">
                <label>Cantidad</label>
                <input class="form-control" #cantidad type="number" placeholder="Ingrese una cantidad del producto">
            </div>
            <div class="col">
                <label>Fecha Entrega</label><br>
                <input class="form-control" #fecha type="datetime-local" placeholder="Ingrese una cantidad del producto">
            </div>
            <div class="col">
                <label><br></label><br>
                <button (click)="agregar(cantidad.value)" type="button" class="btn btn-primary"><i class="fa fa-plus" aria-hidden="true"></i></button>
            </div>
        </div>
        <br>
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">Nombre</th>
                    <th scope="col">Precio</th>
                    <th scope="col">Cantidad</th>
                    <th scope="col">total</th>
                    <th scope="col">Eliminar</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let producto of productosSeleccionado; let i= index">
                    <td>{{ producto.nombreP }}</td>
                    <td>{{ producto.precio }}</td>
                    <td>{{ cantidades[i] }}</td>
                    <td>$ {{ totalUnitario[i] }}</td>
                    <td><button class="btn btn-danger" (click)="eliminarProducto(i)"><i class="fa fa-minus" aria-hidden="true"></i></button></td>
                </tr>
            </tbody>
        </table>
        <br>
        <label>Total</label>
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text">$</span>
            </div>
            <input disabled type="number" value="{{ total }}" class="form-control" aria-label="Amount (to the nearest dollar)">
        </div>
        <br>
        <button type="button" (click)="guardar(fecha.value)" class="btn btn-success btn-lg btn-block">Generar Pedido</button>
    </div>
</div>